# Recipe created by recipetool
# This is the basis of a recipe and may need further editing in order to be fully functional.
# (Feel free to remove these comments when editing.)

# WARNING: the following LICENSE and LIC_FILES_CHKSUM values are best guesses - it is
# your responsibility to verify that the values are complete and correct.
LICENSE = "MIT"
LIC_FILES_CHKSUM = "file://LICENSE;md5=c2f7519471c49aebd6646cc1f67eac68"

SRC_URI = "git://github.com/KamilPiekutowski/oled_test.git;protocol=https;branch=main \
"
# Modify these as desired
PV = "1.0+git${SRCPV}"
SRCREV = "1b51db52daf6822dc0da1021b0a1941aa92e0203"

S = "${WORKDIR}/git"

EXTRA_OEMAKE = " \
   'CC=${CC}' \
   'LD=arm-poky-linux-gnueabi-ld' \
   'RANLIB=${RANLIB}' \
   'AR=${AR}' \
   'CFLAGS=${CFLAGS}' \
   'CXXFLAGS=‚Äù${CXXFLAGS}' \
   'INC=${STAGING_INCDIR}/include' \
   'SO=${STAGING_LIBDIR}' \
   'LIBDIR=${IMAGE_ROOTFS}' \
"

do_install () {
    install -d 0755 ${D}/usr/bin
    install -m 0755 ${S}/ssd1306_demo ${D}/usr/bin
}

INSANE_SKIP_${PN} += "ldflags"

FILES_${NP} = " \
    /usr/bin \
    /usr/bin/ssd1306_demo \
"

RDEPENDS_${NP} =" \
    arduipi-ssd1306 \
    i2c-tools \
"
